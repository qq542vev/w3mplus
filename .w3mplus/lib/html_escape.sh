html_escape() {
	set -- "${1}" "${2}" ''
	until [ "${2#*&}" = "${2}" ]; do
		set -- "${1}" "${2#*&}" "${3}${2%%&*}&amp;"
	done

	set -- "${1}" "${3}${2}" ''
	until [ "${2#*<}" = "${2}" ]; do
		set -- "${1}" "${2#*<}" "${3}${2%%<*}&lt;"
	done

	set -- "${1}" "${3}${2}" ''
	until [ "${2#*>}" = "${2}" ]; do
		set -- "${1}" "${2#*>}" "${3}${2%%>*}&gt;"
	done

	set -- "${1}" "${3}${2}" ''
	until [ "${2#*\'}" = "${2}" ]; do
		set -- "${1}" "${2#*\'}" "${3}${2%%\'*}&#39;"
	done

	set -- "${1}" "${3}${2}" ''
	until [ "${2#*\"}" = "${2}" ]; do
		set -- "${1}" "${2#*\"}" "${3}${2%%\"*}&quot;"
	done

	eval "${1}=\"\${3}\${2}\""
}
